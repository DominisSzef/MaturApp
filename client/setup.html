<!DOCTYPE html>
<html lang="pl" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>MaturApp - Setup</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-black d-flex justify-content-center align-items-center vh-100">

<div class="card bg-dark text-white border-secondary p-4" style="max-width: 800px; width: 100%;">
    <h2 class="text-success fw-bold mb-3">üõ†Ô∏è Aktualizacja Bazy Danych</h2>
    <p class="text-secondary mb-4">
        Ten skrypt wgra pe≈ÇnƒÖ strukturƒô dzia≈Ç√≥w maturalnych (Rozdzia≈Çy I-XI).
    </p>

    <button id="btn-seed" class="btn btn-primary btn-lg w-100 fw-bold mb-3" onclick="seedDatabase()">
        üöÄ Wgraj Pe≈ÇnƒÖ Listƒô Temat√≥w
    </button>

    <div id="status" class="alert alert-secondary d-none" style="max-height: 200px; overflow-y: auto;"></div>
    <a href="dashboard.html" class="btn btn-outline-light w-100 mt-2">Wr√≥ƒá do Dashboardu</a>
</div>

<script>
    const API_URL = 'http://localhost:8080/api';

    // TWOJA PE≈ÅNA LISTA
    const topicsData = [
        // Rozdzia≈Ç I
        { ch: "Rozdzia≈Ç I. Liczby i dzia≈Çania", t: "1. Liczby rzeczywiste" },
        { ch: "Rozdzia≈Ç I. Liczby i dzia≈Çania", t: "2. Potƒôgi" },
        { ch: "Rozdzia≈Ç I. Liczby i dzia≈Çania", t: "3. Pierwiastki" },
        { ch: "Rozdzia≈Ç I. Liczby i dzia≈Çania", t: "4. Logarytmy" },
        { ch: "Rozdzia≈Ç I. Liczby i dzia≈Çania", t: "5. Procenty" },
        { ch: "Rozdzia≈Ç I. Liczby i dzia≈Çania", t: "6. Przedzia≈Çy liczbowe i zbiory" },
        // Rozdzia≈Ç II
        { ch: "Rozdzia≈Ç II. Algebra", t: "7. Wielomiany" },
        { ch: "Rozdzia≈Ç II. Algebra", t: "8. Wzory skr√≥conego mno≈ºenia" },
        // Rozdzia≈Ç III
        { ch: "Rozdzia≈Ç III. R√≥wnania i nier√≥wno≈õci", t: "9. R√≥wnania i nier√≥wno≈õci liniowe" },
        { ch: "Rozdzia≈Ç III. R√≥wnania i nier√≥wno≈õci", t: "10. Uk≈Çad r√≥wna≈Ñ" },
        { ch: "Rozdzia≈Ç III. R√≥wnania i nier√≥wno≈õci", t: "11. R√≥wnania kwadratowe" },
        { ch: "Rozdzia≈Ç III. R√≥wnania i nier√≥wno≈õci", t: "12. Nier√≥wno≈õci kwadratowe" },
        { ch: "Rozdzia≈Ç III. R√≥wnania i nier√≥wno≈õci", t: "13. Pozosta≈Çe r√≥wnania" },
        // Rozdzia≈Ç IV
        { ch: "Rozdzia≈Ç IV. Funkcje", t: "14. W≈Çasno≈õci funkcji" },
        { ch: "Rozdzia≈Ç IV. Funkcje", t: "15. Wykresy, wzory i wsp√≥≈Çczynniki funkcji liniowej" },
        { ch: "Rozdzia≈Ç IV. Funkcje", t: "16. Wykresy funkcji kwadratowej" },
        { ch: "Rozdzia≈Ç IV. Funkcje", t: "17. Wzory i wsp√≥≈Çczynniki funkcji kwadratowej" },
        { ch: "Rozdzia≈Ç IV. Funkcje", t: "18. Przekszta≈Çcenia funkcji" },
        { ch: "Rozdzia≈Ç IV. Funkcje", t: "19. Warto≈õci odwrotnie proporcjonalne" },
        { ch: "Rozdzia≈Ç IV. Funkcje", t: "20. Funkcja wyk≈Çadnicza i logarytmiczna" },
        // Rozdzia≈Ç V
        { ch: "Rozdzia≈Ç V. CiƒÖgi", t: "21. CiƒÖgi liczbowe" },
        { ch: "Rozdzia≈Ç V. CiƒÖgi", t: "22. CiƒÖg arytmetyczny" },
        { ch: "Rozdzia≈Ç V. CiƒÖgi", t: "23. CiƒÖg geometryczny" },
        // Rozdzia≈Ç VI
        { ch: "Rozdzia≈Ç VI. Trygonometria", t: "24. Funkcje trygonometryczne" },
        { ch: "Rozdzia≈Ç VI. Trygonometria", t: "25. Odczytywanie informacji z tablic trygonometrycznych" },
        { ch: "Rozdzia≈Ç VI. Trygonometria", t: "26. Zale≈ºno≈õci miƒôdzy funkcjami trygonometrycznymi" },
        { ch: "Rozdzia≈Ç VI. Trygonometria", t: "27. Trygonometria w planimetrii" },
        { ch: "Rozdzia≈Ç VI. Trygonometria", t: "28. Trygonometria w stereometrii" },
        // Rozdzia≈Ç VII
        { ch: "Rozdzia≈Ç VII. Planimetria", t: "29. KƒÖt ≈õrodkowy i wpisany" },
        { ch: "Rozdzia≈Ç VII. Planimetria", t: "30. Styczna do okrƒôgu i okrƒôgi styczne" },
        { ch: "Rozdzia≈Ç VII. Planimetria", t: "31. Podobie≈Ñstwo figur" },
        // Rozdzia≈Ç VIII
        { ch: "Rozdzia≈Ç VIII. Geometria analityczna", t: "32. R√≥wnanie prostej" },
        { ch: "Rozdzia≈Ç VIII. Geometria analityczna", t: "33. Proste prostopad≈Çe i r√≥wnoleg≈Çe" },
        { ch: "Rozdzia≈Ç VIII. Geometria analityczna", t: "34. Punkty, odcinki i proste" },
        { ch: "Rozdzia≈Ç VIII. Geometria analityczna", t: "35. R√≥wnanie okrƒôgu" },
        { ch: "Rozdzia≈Ç VIII. Geometria analityczna", t: "36. Symetria w uk≈Çadzie wsp√≥≈Çrzƒôdnych" },
        // Rozdzia≈Ç IX
        { ch: "Rozdzia≈Ç IX. Stereometria", t: "37. Graniastos≈Çupy i ostros≈Çupy" },
        { ch: "Rozdzia≈Ç IX. Stereometria", t: "38. Bry≈Çy obrotowe" },
        // Rozdzia≈Ç X
        { ch: "Rozdzia≈Ç X. Statystyka i prawdopodobie≈Ñstwo", t: "39. Statystyka" },
        { ch: "Rozdzia≈Ç X. Statystyka i prawdopodobie≈Ñstwo", t: "40. Kombinatoryka" },
        { ch: "Rozdzia≈Ç X. Statystyka i prawdopodobie≈Ñstwo", t: "41. Prawdopodobie≈Ñstwo" },
        // Rozdzia≈Ç XI
        { ch: "Rozdzia≈Ç XI. Optymalizacja", t: "42. Zadania optymalizacyjne" }
    ];

    async function seedDatabase() {
        const btn = document.getElementById('btn-seed');
        const status = document.getElementById('status');

        btn.disabled = true;
        btn.innerText = "Wysy≈Çanie...";
        status.classList.remove('d-none', 'alert-success', 'alert-danger');
        status.classList.add('alert-info');
        status.innerText = "≈ÅƒÖczenie z serwerem...";

        let successCount = 0;

        try {
            // 1. Najpierw usu≈Ñmy stare tematy (Opcjonalne, ale zalecane dla porzƒÖdku)
            // Tutaj po prostu nadpisujemy bazƒô nowymi wpisami

            for (const item of topicsData) {
                // Tworzymy obiekt do wys≈Çania
                const payload = {
                    title: item.t,
                    chapter: item.ch,
                    // Placeholdery (tre≈õƒá dodamy p√≥≈∫niej)
                    theoryHtml: `<h3 class="text-primary">${item.t}</h3><p>Tutaj pojawi siƒô teoria do tego tematu.</p>`,
                    tasksHtml: `<h3 class="text-success">Zadania: ${item.t}</h3><p>Tutaj pojawiƒÖ siƒô zadania maturalne.</p>`
                    // Backend musi obs≈Çugiwaƒá pole 'tasksHtml' - je≈õli nie, zignoruje je, ale to nie szkodzi
                };

                const res = await fetch(`${API_URL}/topics`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (res.ok) successCount++;
            }

            status.classList.remove('alert-info');
            status.classList.add('alert-success');
            status.innerHTML = `‚úÖ Sukces! Dodano ${successCount} temat√≥w.<br>Twoja baza jest gotowa.`;

        } catch (e) {
            status.classList.remove('alert-info');
            status.classList.add('alert-danger');
            status.innerHTML = `‚ùå B≈ÇƒÖd: ${e.message}`;
            console.error(e);
        } finally {
            btn.disabled = false;
            btn.innerText = "Wgraj Pe≈ÇnƒÖ Listƒô Temat√≥w";
        }
    }
</script>
</body>
</html>